<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Analysis Data</title>
    <script>
        // Test data saver - simulates prediction completion
        function saveTestData() {
            const testData = {
                closedRoads: ['0-1', '5-10'],
                baseline: {
                    predictions: [
                        {source: '0', target: '1', congestion: 2.5},
                        {source: '5', target: '10', congestion: 3.2},
                        {source: '10', target: '15', congestion: 1.8}
                    ],
                    stats: {
                        mean_congestion: 2.5,
                        max_congestion: 5.2,
                        min_congestion: 0.8,
                        road_mean: 2.3,
                        metro_mean: 1.9
                    }
                },
                withClosures: {
                    predictions: [
                        {source: '0', target: '1', congestion: 0},  // Closed
                        {source: '5', target: '10', congestion: 0}, // Closed
                        {source: '10', target: '15', congestion: 6.5} // Increased
                    ],
                    stats: {
                        mean_congestion: 3.8,
                        max_congestion: 7.5,
                        min_congestion: 0,
                        road_mean: 4.2,
                        metro_mean: 2.1
                    }
                }
            };
            
            localStorage.setItem('cityAnalysisData', JSON.stringify(testData));
            document.getElementById('status').textContent = '‚úÖ Test data saved to localStorage!';
            document.getElementById('status').style.color = 'green';
            
            // Enable the button
            document.getElementById('openBtn').disabled = false;
        }
        
        function openAnalysis() {
            window.open('frontend/analysis.html', '_blank');
        }
        
        function clearData() {
            localStorage.removeItem('cityAnalysisData');
            document.getElementById('status').textContent = 'üóëÔ∏è Test data cleared!';
            document.getElementById('status').style.color = 'orange';
            document.getElementById('openBtn').disabled = true;
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-top: 0;
        }
        button {
            padding: 12px 24px;
            margin: 10px 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        .btn-primary {
            background: #3498db;
            color: white;
        }
        .btn-success {
            background: #2ecc71;
            color: white;
        }
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        #status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
            background: #ecf0f1;
            font-weight: bold;
        }
        .info {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>üß™ Analysis Page Tester</h1>
        
        <div class="info">
            <strong>üìã Instructions:</strong><br>
            1. Click "Save Test Data" to simulate a prediction<br>
            2. Click "Open Analysis Page" to view the results<br>
            3. Check that percentages show correctly (2.5%, 6.5%, etc.)<br>
            4. Clear data when done testing
        </div>
        
        <div>
            <button class="btn-primary" onclick="saveTestData()">
                üíæ Save Test Data
            </button>
            
            <button class="btn-success" id="openBtn" onclick="openAnalysis()" disabled>
                üìä Open Analysis Page
            </button>
            
            <button class="btn-danger" onclick="clearData()">
                üóëÔ∏è Clear Data
            </button>
        </div>
        
        <div id="status">Click "Save Test Data" to begin</div>
        
        <hr style="margin: 30px 0;">
        
        <h3>Expected Results:</h3>
        <ul>
            <li>Average: 2.5% ‚Üí 3.8% (+1.3%)</li>
            <li>Max: 5.2% ‚Üí 7.5% (+2.3%)</li>
            <li>Road values should show as 2.3%, 4.2%, etc.</li>
            <li>Individual roads: 2.5%, 3.2%, 6.5%</li>
        </ul>
    </div>
</body>
</html>
